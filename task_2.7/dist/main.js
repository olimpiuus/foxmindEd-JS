(()=>{var e={619:(e,t,i)=>{e.exports=i.p+"imgs/moon-waning-crescent.c3556d440980c942661792fe126a221b.svg"},776:(e,t,i)=>{e.exports=i.p+"imgs/white-balance-sunny.192e78bb875e4f1909eae6d408e72fae.svg"},766:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i(91),s=i.n(n),o=new URL(i(376),i.b);const r='<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"/> <meta http-equiv="X-UA-Compatible" content="IE=edge"/> <meta name="viewport" content="width=device-width/ninitial-scale=1"/> <title>Country</title> <link rel="stylesheet" href="'+s()(o)+'"/> </head> <body> <header class="header"> <h1 class="header__title">Where in the world?</h1> <div class="header__btn-mode-block"></div> </header> <main class="countries__container"> <form action="" class="countries__search-form"> <section class="country__search search"> <input class="search__input" type="search" placeholder="Search city" name="city" id="searchLocation"/> <ul class="search__options"></ul> </section> <select class="search__select-region" name="regions" id="sel1"> <option disabled="disabled" selected="selected" value="Initial"> --Please choose a region-- </option> <option value="All">All</option> <option value="Africa">Africa</option> <option value="Americas">Americas</option> <option value="Asia">Asia</option> <option value="Europe">Europe</option> <option value="Oceania">Oceania</option> </select> </form> <div class="countries__list-wrapper"> <ul class="countries__list"></ul> <div class="spinner-wrapper spinner-deactivated"> <div class="spinner"></div> </div> </div> </main> </body> </html> '},91:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},111:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(269)),r=s(i(955)),a=new class{constructor(){this._getValue=()=>{if("All"===r.default.element.value||"Initial"===r.default.element.value)return o.default.getSearchResults(this.element.value);{const e=this.element.value.split("");return r.default.getSelectedCountries.filter((t=>{let i=!0;const n=t.name.split("");return e.forEach((e=>{const t=n.findIndex((t=>t===e));-1!==t?n.splice(t,1):i=!1})),i})).map((e=>e.name))}},this._addOption=e=>{this.options.insertAdjacentHTML("beforeend",`\n    <div class="search__option">${e}</div>\n  `)},this.clearOptions=()=>this.options.innerHTML="",this._updateDom=()=>n(this,void 0,void 0,(function*(){let e;this.element.addEventListener("keyup",(()=>{e&&clearTimeout(e),e=setTimeout((()=>n(this,void 0,void 0,(function*(){this.clearOptions();try{(yield this._getValue()).forEach((e=>this._addOption(e)))}catch(e){this.clearOptions(),this._addOption("Country not found")}""===this.element.value&&this.clearOptions()}))),500)}))})),this.element=document.querySelector(".search__input"),this.options=document.querySelector(".search__options"),this._updateDom()}};t.default=a},791:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(727)),r=s(i(269)),a=s(i(111)),c=s(i(534));(new class{constructor(){this.handler=()=>{document.addEventListener("click",(e=>n(this,void 0,void 0,(function*(){const t=e.target;if(t instanceof HTMLElement){if(t.classList.contains("search__option")){if(!t.textContent||"Country not found"===t.textContent)return;const e=yield r.default.getCountry(t.textContent);o.default.addArrayCountries([e]),a.default.clearOptions(),a.default.element.value=e.name}t.closest(".header__btn-mode-block")&&c.default.changeTheme()}}))))}}}).handler()},937:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,n,s){this.name=e,this.population=t,this.region=i,this.capital=n,this.img=s,this.getCountry=()=>this}}},269:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(937)),r=new class{constructor(){this._requestByName=e=>n(this,void 0,void 0,(function*(){const t=yield fetch(`https://restcountries.com/v3.1/name/${e}`);return yield t.json()})),this._requestByRegion=e=>n(this,void 0,void 0,(function*(){const t=yield fetch(`https://restcountries.com/v3.1/region/${e}`);return yield t.json()})),this._requestAll=()=>n(this,void 0,void 0,(function*(){const e=yield fetch("https://restcountries.com/v3.1/all");return yield e.json()})),this._getCountryObjFromAnswer=e=>{const{capital:t,name:{official:i},population:n,region:s,flags:{svg:r}}=e;return new o.default(i,n,s,t,r)},this._getCountriesFromRequest=e=>e.map((e=>this._getCountryObjFromAnswer(e))),this.getCountry=e=>n(this,void 0,void 0,(function*(){const t=yield this._requestByName(e);return this._getCountriesFromRequest(t)[0]})),this.getCountiesFromRegionsRequest=e=>n(this,void 0,void 0,(function*(){const t=yield this._requestByRegion(e);return this._getCountriesFromRequest(t)})),this.getSearchResults=e=>n(this,void 0,void 0,(function*(){return(yield this._requestByName(e)).map((e=>e.name.official))})),this.getAllCountries=()=>n(this,void 0,void 0,(function*(){const e=yield this._requestAll();return this._getCountriesFromRequest(e)}))}};t.default=r},727:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(i(152)),o=new class{constructor(){this.clearList=()=>{this.list.innerHTML=""},this.addCountry=({name:e,population:t,region:i,capital:n,img:s})=>{this.list.insertAdjacentHTML("beforeend",`\n    <li class="countries__country-item country">\n        <img src="${s}" alt="" class="country__flag">\n        <div class="country__description">\n            <h3 class="country__title">${e}</h3>\n            <p class="country__info"><b>Population: </b>${t}</p>\n            <p class="country__info"><b>Region:</b> ${i}</p>\n            <p class="country__info"><b>Capital:</b> ${n}</p>\n        </div>\n    </li>`)},this.addArrayCountries=e=>{s.default.activate(),this.clearList(),this.list.style.display="none",e.forEach((e=>this.addCountry(e))),setTimeout((()=>{s.default.deactivate()}),500),this.list.style.display="grid"},this.list=document.querySelector(".countries__list")}};t.default=o},955:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(269)),r=s(i(727)),a=new class{constructor(){this._selectListener=()=>{this.element.addEventListener("change",(()=>n(this,void 0,void 0,(function*(){this._selectChoice=this.element.value,"All"===this._selectChoice?this.getSelectedCountries=yield o.default.getAllCountries():this.getSelectedCountries=yield o.default.getCountiesFromRegionsRequest(this._selectChoice),r.default.addArrayCountries(this.getSelectedCountries)}))))},this.element=document.querySelector(".search__select-region"),this._selectChoice=null,this.getSelectedCountries=[],this._selectListener()}};t.default=a},152:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new class{constructor(){this.activate=()=>{this.element.classList.remove("spinner-deactivated"),this.element.classList.add("spinner-active")},this.deactivate=()=>{this.element.classList.remove("spinner-active"),this.element.classList.add("spinner-deactivated")},this.element=document.querySelector(".spinner-wrapper")}};t.default=i},534:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new class{constructor(){this._renderDark=()=>{this.element.innerHTML=`<img class="header__btn-img" src="${this.img.sun}" alt="">\n      <button class="header__btn-mode">Light Mode</button>`},this._renderLight=()=>{this.element.innerHTML=`<img class="header__btn-img" src="${this.img.moon}" alt="">\n      <button class="header__btn-mode">Dark Mode</button>`},this._renderBtn=()=>{"dark"===this._customerTheme?this._renderDark():this._renderLight()},this._initialize=()=>{document.documentElement.setAttribute("data-theme",this._customerTheme),this._renderBtn()},this.changeTheme=()=>{let e;e="light"===this._customerTheme?"dark":"light",document.documentElement.setAttribute("data-theme",e),this._customerTheme=e,n._renderBtn()},this.element=document.querySelector(".header__btn-mode-block"),this.img={sun:i(776),moon:i(619)},this._customerTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",this._initialize()}};t.default=n},376:(e,t,i)=>{"use strict";e.exports=i.p+"css/style.css"}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),i.b=document.baseURI||self.location.href,(()=>{"use strict";i(766),i(791)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPQyxlQUFlM0gsRUFBUyxhQUFjLENBQUVnQixPQUFPLEdBQU8sRSxNQ0w5RCxJQUFJeUgsRUFDQTdCLEVBQW9Ca0IsRUFBRVksZ0JBQWVELEVBQVk3QixFQUFvQmtCLEVBQUVhLFNBQVcsSUFDdEYsSUFBSWhHLEVBQVdpRSxFQUFvQmtCLEVBQUVuRixTQUNyQyxJQUFLOEYsR0FBYTlGLElBQ2JBLEVBQVNpRyxnQkFDWkgsRUFBWTlGLEVBQVNpRyxjQUFjQyxNQUMvQkosR0FBVyxDQUNmLElBQUlLLEVBQVVuRyxFQUFTb0cscUJBQXFCLFVBQ3pDRCxFQUFRRSxTQUFRUCxFQUFZSyxFQUFRQSxFQUFRRSxPQUFTLEdBQUdILElBQzVELENBSUQsSUFBS0osRUFBVyxNQUFNLElBQUlRLE1BQU0seURBQ2hDUixFQUFZQSxFQUFVUyxRQUFRLE9BQVEsSUFBSUEsUUFBUSxRQUFTLElBQUlBLFFBQVEsWUFBYSxLQUNwRnRDLEVBQW9CdUMsRUFBSVYsQyxLQ2Z4QjdCLEVBQW9Cd0MsRUFBSXpHLFNBQVMwRyxTQUFXQyxLQUFLWCxTQUFTWSxLLG1CQ0ExRCxPQUNBLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qcy8uL3NyYy9hc3NldHMvaW1nL21vb24td2FuaW5nLWNyZXNjZW50LnN2ZyIsIndlYnBhY2s6Ly9qcy8uL3NyYy9hc3NldHMvaW1nL3doaXRlLWJhbGFuY2Utc3Vubnkuc3ZnIiwid2VicGFjazovL2pzLy4vc3JjL2luZGV4Lmh0bWwiLCJ3ZWJwYWNrOi8vanMvLi9ub2RlX21vZHVsZXMvaHRtbC1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qcyIsIndlYnBhY2s6Ly9qcy8uL3NyYy90cy9jb21wb25lbnQvYXBwLnRzIiwid2VicGFjazovL2pzLy4vc3JjL3RzL2NvbXBvbmVudC9jbGlja0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vanMvLi9zcmMvdHMvY29tcG9uZW50L2NvdW50cnkudHMiLCJ3ZWJwYWNrOi8vanMvLi9zcmMvdHMvY29tcG9uZW50L2dldERhdGEudHMiLCJ3ZWJwYWNrOi8vanMvLi9zcmMvdHMvY29tcG9uZW50L3JlbmRlckxpc3QudHMiLCJ3ZWJwYWNrOi8vanMvLi9zcmMvdHMvY29tcG9uZW50L3NlbGVjdC50cyIsIndlYnBhY2s6Ly9qcy8uL3NyYy90cy9jb21wb25lbnQvc3Bpbm5lci50cyIsIndlYnBhY2s6Ly9qcy8uL3NyYy90cy9jb21wb25lbnQvdGhlbWUudHMiLCJ3ZWJwYWNrOi8vanMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vanMvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vanMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2pzL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vanMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9qcy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2pzL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL2pzL3dlYnBhY2svcnVudGltZS9qc29ucCBjaHVuayBsb2FkaW5nIiwid2VicGFjazovL2pzLy4vc3JjL3RzL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltZ3MvbW9vbi13YW5pbmctY3Jlc2NlbnQuYzM1NTZkNDQwOTgwYzk0MjY2MTc5MmZlMTI2YTIyMWIuc3ZnXCI7IiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaW1ncy93aGl0ZS1iYWxhbmNlLXN1bm55LjE5MmU3OGJiODc1ZTRmMTkwOWVhZTZkNDA4ZTcyZmFlLnN2Z1wiOyIsIi8vIEltcG9ydHNcbmltcG9ydCBfX19IVE1MX0xPQURFUl9HRVRfU09VUkNFX0ZST01fSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvaHRtbC1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiO1xudmFyIF9fX0hUTUxfTE9BREVSX0lNUE9SVF8wX19fID0gbmV3IFVSTChcIi4vc2Fzcy9zdHlsZS5zYXNzXCIsIGltcG9ydC5tZXRhLnVybCk7XG4vLyBNb2R1bGVcbnZhciBfX19IVE1MX0xPQURFUl9SRVBMQUNFTUVOVF8wX19fID0gX19fSFRNTF9MT0FERVJfR0VUX1NPVVJDRV9GUk9NX0lNUE9SVF9fXyhfX19IVE1MX0xPQURFUl9JTVBPUlRfMF9fXyk7XG52YXIgY29kZSA9IFwiPCFET0NUWVBFIGh0bWw+IDxodG1sIGxhbmc9XFxcImVuXFxcIj4gPGhlYWQ+IDxtZXRhIGNoYXJzZXQ9XFxcIlVURi04XFxcIi8+IDxtZXRhIGh0dHAtZXF1aXY9XFxcIlgtVUEtQ29tcGF0aWJsZVxcXCIgY29udGVudD1cXFwiSUU9ZWRnZVxcXCIvPiA8bWV0YSBuYW1lPVxcXCJ2aWV3cG9ydFxcXCIgY29udGVudD1cXFwid2lkdGg9ZGV2aWNlLXdpZHRoL25pbml0aWFsLXNjYWxlPTFcXFwiLz4gPHRpdGxlPkNvdW50cnk8L3RpdGxlPiA8bGluayByZWw9XFxcInN0eWxlc2hlZXRcXFwiIGhyZWY9XFxcIlwiICsgX19fSFRNTF9MT0FERVJfUkVQTEFDRU1FTlRfMF9fXyArIFwiXFxcIi8+IDwvaGVhZD4gPGJvZHk+IDxoZWFkZXIgY2xhc3M9XFxcImhlYWRlclxcXCI+IDxoMSBjbGFzcz1cXFwiaGVhZGVyX190aXRsZVxcXCI+V2hlcmUgaW4gdGhlIHdvcmxkPzwvaDE+IDxkaXYgY2xhc3M9XFxcImhlYWRlcl9fYnRuLW1vZGUtYmxvY2tcXFwiPjwvZGl2PiA8L2hlYWRlcj4gPG1haW4gY2xhc3M9XFxcImNvdW50cmllc19fY29udGFpbmVyXFxcIj4gPGZvcm0gYWN0aW9uPVxcXCJcXFwiIGNsYXNzPVxcXCJjb3VudHJpZXNfX3NlYXJjaC1mb3JtXFxcIj4gPHNlY3Rpb24gY2xhc3M9XFxcImNvdW50cnlfX3NlYXJjaCBzZWFyY2hcXFwiPiA8aW5wdXQgY2xhc3M9XFxcInNlYXJjaF9faW5wdXRcXFwiIHR5cGU9XFxcInNlYXJjaFxcXCIgcGxhY2Vob2xkZXI9XFxcIlNlYXJjaCBjaXR5XFxcIiBuYW1lPVxcXCJjaXR5XFxcIiBpZD1cXFwic2VhcmNoTG9jYXRpb25cXFwiLz4gPHVsIGNsYXNzPVxcXCJzZWFyY2hfX29wdGlvbnNcXFwiPjwvdWw+IDwvc2VjdGlvbj4gPHNlbGVjdCBjbGFzcz1cXFwic2VhcmNoX19zZWxlY3QtcmVnaW9uXFxcIiBuYW1lPVxcXCJyZWdpb25zXFxcIiBpZD1cXFwic2VsMVxcXCI+IDxvcHRpb24gZGlzYWJsZWQ9XFxcImRpc2FibGVkXFxcIiBzZWxlY3RlZD1cXFwic2VsZWN0ZWRcXFwiIHZhbHVlPVxcXCJJbml0aWFsXFxcIj4gLS1QbGVhc2UgY2hvb3NlIGEgcmVnaW9uLS0gPC9vcHRpb24+IDxvcHRpb24gdmFsdWU9XFxcIkFsbFxcXCI+QWxsPC9vcHRpb24+IDxvcHRpb24gdmFsdWU9XFxcIkFmcmljYVxcXCI+QWZyaWNhPC9vcHRpb24+IDxvcHRpb24gdmFsdWU9XFxcIkFtZXJpY2FzXFxcIj5BbWVyaWNhczwvb3B0aW9uPiA8b3B0aW9uIHZhbHVlPVxcXCJBc2lhXFxcIj5Bc2lhPC9vcHRpb24+IDxvcHRpb24gdmFsdWU9XFxcIkV1cm9wZVxcXCI+RXVyb3BlPC9vcHRpb24+IDxvcHRpb24gdmFsdWU9XFxcIk9jZWFuaWFcXFwiPk9jZWFuaWE8L29wdGlvbj4gPC9zZWxlY3Q+IDwvZm9ybT4gPGRpdiBjbGFzcz1cXFwiY291bnRyaWVzX19saXN0LXdyYXBwZXJcXFwiPiA8dWwgY2xhc3M9XFxcImNvdW50cmllc19fbGlzdFxcXCI+PC91bD4gPGRpdiBjbGFzcz1cXFwic3Bpbm5lci13cmFwcGVyIHNwaW5uZXItZGVhY3RpdmF0ZWRcXFwiPiA8ZGl2IGNsYXNzPVxcXCJzcGlubmVyXFxcIj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L21haW4+IDwvYm9keT4gPC9odG1sPiBcIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICBpZiAoIXVybCkge1xuICAgIHJldHVybiB1cmw7XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlLCBuby1wYXJhbS1yZWFzc2lnblxuXG5cbiAgdXJsID0gU3RyaW5nKHVybC5fX2VzTW9kdWxlID8gdXJsLmRlZmF1bHQgOiB1cmwpO1xuXG4gIGlmIChvcHRpb25zLmhhc2gpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB1cmwgKz0gb3B0aW9ucy5oYXNoO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMubWF5YmVOZWVkUXVvdGVzICYmIC9bXFx0XFxuXFxmXFxyIFwiJz08PmBdLy50ZXN0KHVybCkpIHtcbiAgICByZXR1cm4gXCJcXFwiXCIuY29uY2F0KHVybCwgXCJcXFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07IiwiaW1wb3J0IHJlcXVlc3QgZnJvbSBcIi4vZ2V0RGF0YVwiO1xuaW1wb3J0IHNlbGVjdCBmcm9tIFwiLi9zZWxlY3RcIjtcblxuY2xhc3MgU2VhcmNoIHtcbiAgZWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcbiAgb3B0aW9uczogSFRNTFVMaXN0RWxlbWVudDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlYXJjaF9faW5wdXRcIikhO1xuICAgIHRoaXMub3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoX19vcHRpb25zXCIpITtcbiAgICB0aGlzLl91cGRhdGVEb20oKTtcbiAgfVxuXG4gIHByaXZhdGUgX2dldFZhbHVlID0gKCkgPT4ge1xuICAgIGlmIChzZWxlY3QuZWxlbWVudC52YWx1ZSA9PT0gXCJBbGxcIiB8fCBzZWxlY3QuZWxlbWVudC52YWx1ZSA9PT0gXCJJbml0aWFsXCIpIHtcbiAgICAgIHJldHVybiByZXF1ZXN0LmdldFNlYXJjaFJlc3VsdHModGhpcy5lbGVtZW50LnZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2VhcmNoTGV0dGVycyA9IHRoaXMuZWxlbWVudC52YWx1ZS5zcGxpdChcIlwiKTtcbiAgICAgIGNvbnN0IGNvdW50cmllcyA9IHNlbGVjdC5nZXRTZWxlY3RlZENvdW50cmllcy5maWx0ZXIoKGNvdW50cnkpID0+IHtcbiAgICAgICAgbGV0IGNoZWNrID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgbmFtZSA9IGNvdW50cnkubmFtZS5zcGxpdChcIlwiKTtcbiAgICAgICAgc2VhcmNoTGV0dGVycy5mb3JFYWNoKChsZXR0ZXIpID0+IHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IG5hbWUuZmluZEluZGV4KChlbCkgPT4gZWwgPT09IGxldHRlcik7XG4gICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgbmFtZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVjayA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBjaGVjaztcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGNvdW50cmllcy5tYXAoKGNvdW50cnkpID0+IGNvdW50cnkubmFtZSk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgX2FkZE9wdGlvbiA9ICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5vcHRpb25zLmluc2VydEFkamFjZW50SFRNTChcbiAgICAgIFwiYmVmb3JlZW5kXCIsXG4gICAgICBgXG4gICAgPGRpdiBjbGFzcz1cInNlYXJjaF9fb3B0aW9uXCI+JHt2YWx1ZX08L2Rpdj5cbiAgYFxuICAgICk7XG4gIH07XG5cbiAgY2xlYXJPcHRpb25zID0gKCkgPT4gKHRoaXMub3B0aW9ucy5pbm5lckhUTUwgPSBcIlwiKTtcblxuICBwcml2YXRlIF91cGRhdGVEb20gPSBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGRlbGF5OiBOb2RlSlMuVGltZW91dDtcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsICgpID0+IHtcbiAgICAgIGlmIChkZWxheSkge1xuICAgICAgICBjbGVhclRpbWVvdXQoZGVsYXkpO1xuICAgICAgfVxuICAgICAgZGVsYXkgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5jbGVhck9wdGlvbnMoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBzZWFyY2hWYWx1ZXMgPSBhd2FpdCB0aGlzLl9nZXRWYWx1ZSgpO1xuICAgICAgICAgIHNlYXJjaFZhbHVlcy5mb3JFYWNoKChlbCkgPT4gdGhpcy5fYWRkT3B0aW9uKGVsKSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgdGhpcy5jbGVhck9wdGlvbnMoKTtcbiAgICAgICAgICB0aGlzLl9hZGRPcHRpb24oXCJDb3VudHJ5IG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5lbGVtZW50LnZhbHVlID09PSBcIlwiKSB7XG4gICAgICAgICAgdGhpcy5jbGVhck9wdGlvbnMoKTtcbiAgICAgICAgfVxuICAgICAgfSwgNTAwKTtcbiAgICB9KTtcbiAgfTtcbn1cblxuY29uc3Qgc2VhcmNoID0gbmV3IFNlYXJjaCgpO1xuXG5leHBvcnQgZGVmYXVsdCBzZWFyY2g7XG4iLCJpbXBvcnQgcmVuZGVyRm4gZnJvbSBcIi4vcmVuZGVyTGlzdFwiO1xuaW1wb3J0IHJlcXVlc3QgZnJvbSBcIi4vZ2V0RGF0YVwiO1xuaW1wb3J0IHNlYXJjaCBmcm9tIFwiLi9hcHBcIjtcbmltcG9ydCBidG5Nb2RlIGZyb20gXCIuL3RoZW1lXCI7XG5cbmNsYXNzIENsaWNrSGFuZGxlciB7XG4gIGhhbmRsZXI6ICgpID0+IHZvaWQ7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuaGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBmaW5kIHNwZWNpYWwgY291bnRyeSBmcm9tIHNlYXJjaCBsaXN0XG4gICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2VhcmNoX19vcHRpb25cIikpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGFyZ2V0LnRleHRDb250ZW50IHx8XG4gICAgICAgICAgICB0YXJnZXQudGV4dENvbnRlbnQgPT09IFwiQ291bnRyeSBub3QgZm91bmRcIlxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBjb3VudHJ5ID0gYXdhaXQgcmVxdWVzdC5nZXRDb3VudHJ5KHRhcmdldC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgcmVuZGVyRm4uYWRkQXJyYXlDb3VudHJpZXMoW2NvdW50cnldKTtcbiAgICAgICAgICBzZWFyY2guY2xlYXJPcHRpb25zKCk7XG4gICAgICAgICAgc2VhcmNoLmVsZW1lbnQudmFsdWUgPSBjb3VudHJ5Lm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY2hhbmdlIGRvYyB0aGVtZVxuICAgICAgICBpZiAodGFyZ2V0LmNsb3Nlc3QoXCIuaGVhZGVyX19idG4tbW9kZS1ibG9ja1wiKSkge1xuICAgICAgICAgIGJ0bk1vZGUuY2hhbmdlVGhlbWUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcbiAgfVxufVxuXG5uZXcgQ2xpY2tIYW5kbGVyKCkuaGFuZGxlcigpO1xuIiwiZXhwb3J0IGludGVyZmFjZSBJQ291bnRyeUFuc3dlciB7XG4gIGNhcGl0YWw6IHN0cmluZztcbiAgZmxhZ3M6IHtcbiAgICBzdmc6IHN0cmluZztcbiAgfTtcbiAgbmFtZTogeyBvZmZpY2lhbDogc3RyaW5nIH07XG4gIHBvcHVsYXRpb246IG51bWJlcjtcbiAgcmVnaW9uOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvdW50cnkge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nLFxuICAgIHB1YmxpYyBwb3B1bGF0aW9uOiBudW1iZXIsXG4gICAgcHVibGljIHJlZ2lvbjogc3RyaW5nLFxuICAgIHB1YmxpYyBjYXBpdGFsOiBzdHJpbmcsXG4gICAgcHVibGljIGltZzogc3RyaW5nXG4gICkge31cbiAgZ2V0Q291bnRyeSA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbn1cbiIsImltcG9ydCBDb3VudHJ5IGZyb20gXCIuL2NvdW50cnlcIjtcbmltcG9ydCB7IElDb3VudHJ5QW5zd2VyIH0gZnJvbSBcIi4vY291bnRyeVwiO1xuXG5jbGFzcyBHZXREYXRhIHtcbiAgY29uc3RydWN0b3IoKSB7fVxuXG4gIHByaXZhdGUgX3JlcXVlc3RCeU5hbWUgPSBhc3luYyAobmFtZUNvdW50cnk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGFuc3dlciA9IGF3YWl0IGZldGNoKFxuICAgICAgYGh0dHBzOi8vcmVzdGNvdW50cmllcy5jb20vdjMuMS9uYW1lLyR7bmFtZUNvdW50cnl9YFxuICAgICk7XG4gICAgY29uc3QgZGF0YTogSUNvdW50cnlBbnN3ZXJbXSA9IGF3YWl0IGFuc3dlci5qc29uKCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgcHJpdmF0ZSBfcmVxdWVzdEJ5UmVnaW9uID0gYXN5bmMgKHJlZ2lvbjogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgYW5zd2VyID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9yZXN0Y291bnRyaWVzLmNvbS92My4xL3JlZ2lvbi8ke3JlZ2lvbn1gXG4gICAgKTtcbiAgICBjb25zdCBkYXRhOiBJQ291bnRyeUFuc3dlcltdID0gYXdhaXQgYW5zd2VyLmpzb24oKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBwcml2YXRlIF9yZXF1ZXN0QWxsID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGFuc3dlciA9IGF3YWl0IGZldGNoKGBodHRwczovL3Jlc3Rjb3VudHJpZXMuY29tL3YzLjEvYWxsYCk7XG4gICAgY29uc3QgZGF0YTogSUNvdW50cnlBbnN3ZXJbXSA9IGF3YWl0IGFuc3dlci5qc29uKCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgcHJpdmF0ZSBfZ2V0Q291bnRyeU9iakZyb21BbnN3ZXIgPSAoYW5zd2VyOiBJQ291bnRyeUFuc3dlcikgPT4ge1xuICAgIGNvbnN0IHtcbiAgICAgIGNhcGl0YWwsXG4gICAgICBuYW1lOiB7IG9mZmljaWFsOiBuYW1lIH0sXG4gICAgICBwb3B1bGF0aW9uLFxuICAgICAgcmVnaW9uLFxuICAgICAgZmxhZ3M6IHsgc3ZnOiBpbWcgfSxcbiAgICB9ID0gYW5zd2VyO1xuICAgIHJldHVybiBuZXcgQ291bnRyeShuYW1lLCBwb3B1bGF0aW9uLCByZWdpb24sIGNhcGl0YWwsIGltZyk7XG4gIH07XG5cbiAgcHJpdmF0ZSBfZ2V0Q291bnRyaWVzRnJvbVJlcXVlc3QgPSAoZGF0YTogSUNvdW50cnlBbnN3ZXJbXSkgPT4ge1xuICAgIHJldHVybiBkYXRhLm1hcCgoY291bnRyeU9iaikgPT4gdGhpcy5fZ2V0Q291bnRyeU9iakZyb21BbnN3ZXIoY291bnRyeU9iaikpO1xuICB9O1xuXG4gIGdldENvdW50cnkgPSBhc3luYyAobmFtZUNvdW50cnk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9yZXF1ZXN0QnlOYW1lKG5hbWVDb3VudHJ5KTtcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q291bnRyaWVzRnJvbVJlcXVlc3QoZGF0YSlbMF07XG4gIH07XG5cbiAgZ2V0Q291bnRpZXNGcm9tUmVnaW9uc1JlcXVlc3QgPSBhc3luYyAocmVnaW9uOiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fcmVxdWVzdEJ5UmVnaW9uKHJlZ2lvbik7XG4gICAgcmV0dXJuIHRoaXMuX2dldENvdW50cmllc0Zyb21SZXF1ZXN0KGRhdGEpO1xuICB9O1xuXG4gIGdldFNlYXJjaFJlc3VsdHMgPSBhc3luYyAobmFtZUNvdW50cnk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9yZXF1ZXN0QnlOYW1lKG5hbWVDb3VudHJ5KTtcbiAgICBjb25zdCBzZWFyY2hMaXN0ID0gZGF0YS5tYXAoKGVsZW0pID0+IGVsZW0ubmFtZS5vZmZpY2lhbCk7XG4gICAgcmV0dXJuIHNlYXJjaExpc3Q7XG4gIH07XG4gIGdldEFsbENvdW50cmllcyA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fcmVxdWVzdEFsbCgpO1xuICAgIHJldHVybiB0aGlzLl9nZXRDb3VudHJpZXNGcm9tUmVxdWVzdChkYXRhKTtcbiAgfTtcbn1cbmNvbnN0IHJlcXVlc3QgPSBuZXcgR2V0RGF0YSgpO1xuZXhwb3J0IGRlZmF1bHQgcmVxdWVzdDtcbiIsImltcG9ydCBDb3VudHJ5IGZyb20gXCIuL2NvdW50cnlcIjtcbmltcG9ydCBzcGlubmVyIGZyb20gXCIuL3NwaW5uZXJcIjtcblxuY2xhc3MgUmVuZGVyTGlzdCB7XG4gIGxpc3Q6IEhUTUxFbGVtZW50O1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvdW50cmllc19fbGlzdFwiKSE7XG4gIH1cbiAgY2xlYXJMaXN0ID0gKCkgPT4ge1xuICAgIHRoaXMubGlzdC5pbm5lckhUTUwgPSBcIlwiO1xuICB9O1xuICBhZGRDb3VudHJ5ID0gKHsgbmFtZSwgcG9wdWxhdGlvbiwgcmVnaW9uLCBjYXBpdGFsLCBpbWcgfTogQ291bnRyeSkgPT4ge1xuICAgIHRoaXMubGlzdC5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICBcImJlZm9yZWVuZFwiLFxuICAgICAgYFxuICAgIDxsaSBjbGFzcz1cImNvdW50cmllc19fY291bnRyeS1pdGVtIGNvdW50cnlcIj5cbiAgICAgICAgPGltZyBzcmM9XCIke2ltZ31cIiBhbHQ9XCJcIiBjbGFzcz1cImNvdW50cnlfX2ZsYWdcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNvdW50cnlfX2Rlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICA8aDMgY2xhc3M9XCJjb3VudHJ5X190aXRsZVwiPiR7bmFtZX08L2gzPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJjb3VudHJ5X19pbmZvXCI+PGI+UG9wdWxhdGlvbjogPC9iPiR7cG9wdWxhdGlvbn08L3A+XG4gICAgICAgICAgICA8cCBjbGFzcz1cImNvdW50cnlfX2luZm9cIj48Yj5SZWdpb246PC9iPiAke3JlZ2lvbn08L3A+XG4gICAgICAgICAgICA8cCBjbGFzcz1cImNvdW50cnlfX2luZm9cIj48Yj5DYXBpdGFsOjwvYj4gJHtjYXBpdGFsfTwvcD5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9saT5gXG4gICAgKTtcbiAgfTtcbiAgYWRkQXJyYXlDb3VudHJpZXMgPSAoYXJyOiBDb3VudHJ5W10pID0+IHtcbiAgICBzcGlubmVyLmFjdGl2YXRlKCk7XG4gICAgdGhpcy5jbGVhckxpc3QoKTtcbiAgICB0aGlzLmxpc3Quc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIGFyci5mb3JFYWNoKChlbCkgPT4gdGhpcy5hZGRDb3VudHJ5KGVsKSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzcGlubmVyLmRlYWN0aXZhdGUoKTtcbiAgICB9LCA1MDApO1xuICAgIHRoaXMubGlzdC5zdHlsZS5kaXNwbGF5ID0gXCJncmlkXCI7XG4gIH07XG59XG5jb25zdCByZW5kZXJGbiA9IG5ldyBSZW5kZXJMaXN0KCk7XG5leHBvcnQgZGVmYXVsdCByZW5kZXJGbjtcbiIsImltcG9ydCBDb3VudHJ5IGZyb20gXCIuL2NvdW50cnlcIjtcbmltcG9ydCByZXF1ZXN0IGZyb20gXCIuL2dldERhdGFcIjtcbmltcG9ydCByZW5kZXJGbiBmcm9tIFwiLi9yZW5kZXJMaXN0XCI7XG5cbmNsYXNzIFNlbGVjdCB7XG4gIGVsZW1lbnQ6IEhUTUxTZWxlY3RFbGVtZW50O1xuICBwcml2YXRlIF9zZWxlY3RDaG9pY2U6IHN0cmluZyB8IG51bGw7XG4gIGdldFNlbGVjdGVkQ291bnRyaWVzOiBDb3VudHJ5W107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWFyY2hfX3NlbGVjdC1yZWdpb25cIikhO1xuICAgIHRoaXMuX3NlbGVjdENob2ljZSA9IG51bGw7XG4gICAgdGhpcy5nZXRTZWxlY3RlZENvdW50cmllcyA9IFtdO1xuICAgIHRoaXMuX3NlbGVjdExpc3RlbmVyKCk7XG4gIH1cbiAgcHJpdmF0ZSBfc2VsZWN0TGlzdGVuZXIgPSAoKSA9PiB7XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5fc2VsZWN0Q2hvaWNlID0gdGhpcy5lbGVtZW50LnZhbHVlO1xuICAgICAgaWYgKHRoaXMuX3NlbGVjdENob2ljZSA9PT0gXCJBbGxcIikge1xuICAgICAgICB0aGlzLmdldFNlbGVjdGVkQ291bnRyaWVzID0gYXdhaXQgcmVxdWVzdC5nZXRBbGxDb3VudHJpZXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZ2V0U2VsZWN0ZWRDb3VudHJpZXMgPSBhd2FpdCByZXF1ZXN0LmdldENvdW50aWVzRnJvbVJlZ2lvbnNSZXF1ZXN0KFxuICAgICAgICAgIHRoaXMuX3NlbGVjdENob2ljZVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmVuZGVyRm4uYWRkQXJyYXlDb3VudHJpZXModGhpcy5nZXRTZWxlY3RlZENvdW50cmllcyk7XG4gICAgfSk7XG4gIH07XG59XG5jb25zdCBzZWxlY3QgPSBuZXcgU2VsZWN0KCk7XG5leHBvcnQgZGVmYXVsdCBzZWxlY3Q7XG4iLCJjbGFzcyBTcGlubmVyIHtcbiAgZWxlbWVudDogSFRNTERpdkVsZW1lbnQ7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3Bpbm5lci13cmFwcGVyXCIpITtcbiAgfVxuICBhY3RpdmF0ZSA9ICgpID0+IHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInNwaW5uZXItZGVhY3RpdmF0ZWRcIik7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJzcGlubmVyLWFjdGl2ZVwiKTtcbiAgfTtcbiAgZGVhY3RpdmF0ZSA9ICgpID0+IHtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInNwaW5uZXItYWN0aXZlXCIpO1xuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwic3Bpbm5lci1kZWFjdGl2YXRlZFwiKTtcbiAgfTtcbn1cbmNvbnN0IHNwaW5uZXIgPSBuZXcgU3Bpbm5lcigpO1xuZXhwb3J0IGRlZmF1bHQgc3Bpbm5lcjtcbiIsImNsYXNzIGJ0bkNoYW5nZU1vZGUge1xuICBlbGVtZW50OiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgaW1nOiB7XG4gICAgc3VuOiBVUkw7XG4gICAgbW9vbjogVVJMO1xuICB9O1xuICBfY3VzdG9tZXJUaGVtZTogc3RyaW5nO1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlcl9fYnRuLW1vZGUtYmxvY2tcIikhO1xuICAgIHRoaXMuaW1nID0ge1xuICAgICAgc3VuOiByZXF1aXJlKFwiLi4vLi4vYXNzZXRzL2ltZy93aGl0ZS1iYWxhbmNlLXN1bm55LnN2Z1wiKSxcbiAgICAgIG1vb246IHJlcXVpcmUoXCIuLi8uLi9hc3NldHMvaW1nL21vb24td2FuaW5nLWNyZXNjZW50LnN2Z1wiKSxcbiAgICB9O1xuICAgIHRoaXMuX2N1c3RvbWVyVGhlbWUgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIilcbiAgICAgIC5tYXRjaGVzXG4gICAgICA/IFwiZGFya1wiXG4gICAgICA6IFwibGlnaHRcIjtcbiAgICB0aGlzLl9pbml0aWFsaXplKCk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJEYXJrID0gKCkgPT4ge1xuICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBgPGltZyBjbGFzcz1cImhlYWRlcl9fYnRuLWltZ1wiIHNyYz1cIiR7dGhpcy5pbWcuc3VufVwiIGFsdD1cIlwiPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImhlYWRlcl9fYnRuLW1vZGVcIj5MaWdodCBNb2RlPC9idXR0b24+YDtcbiAgfTtcbiAgcHJpdmF0ZSBfcmVuZGVyTGlnaHQgPSAoKSA9PiB7XG4gICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGA8aW1nIGNsYXNzPVwiaGVhZGVyX19idG4taW1nXCIgc3JjPVwiJHt0aGlzLmltZy5tb29ufVwiIGFsdD1cIlwiPlxuICAgICAgPGJ1dHRvbiBjbGFzcz1cImhlYWRlcl9fYnRuLW1vZGVcIj5EYXJrIE1vZGU8L2J1dHRvbj5gO1xuICB9O1xuICBwcml2YXRlIF9yZW5kZXJCdG4gPSAoKSA9PiB7XG4gICAgdGhpcy5fY3VzdG9tZXJUaGVtZSA9PT0gXCJkYXJrXCIgPyB0aGlzLl9yZW5kZXJEYXJrKCkgOiB0aGlzLl9yZW5kZXJMaWdodCgpO1xuICB9O1xuICBwcml2YXRlIF9pbml0aWFsaXplID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRoZW1lXCIsIHRoaXMuX2N1c3RvbWVyVGhlbWUpO1xuICAgIHRoaXMuX3JlbmRlckJ0bigpO1xuICB9O1xuICBjaGFuZ2VUaGVtZSA9ICgpID0+IHtcbiAgICBsZXQgdGFyZ2V0VGhlbWU7XG4gICAgdGhpcy5fY3VzdG9tZXJUaGVtZSA9PT0gXCJsaWdodFwiXG4gICAgICA/ICh0YXJnZXRUaGVtZSA9IFwiZGFya1wiKVxuICAgICAgOiAodGFyZ2V0VGhlbWUgPSBcImxpZ2h0XCIpO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXRoZW1lXCIsIHRhcmdldFRoZW1lKTtcbiAgICB0aGlzLl9jdXN0b21lclRoZW1lID0gdGFyZ2V0VGhlbWU7XG4gICAgYnRuTW9kZS5fcmVuZGVyQnRuKCk7XG4gIH07XG59XG5cbmNvbnN0IGJ0bk1vZGUgPSBuZXcgYnRuQ2hhbmdlTW9kZSgpO1xuXG5leHBvcnQgZGVmYXVsdCBidG5Nb2RlO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbi8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBfX3dlYnBhY2tfbW9kdWxlc19fO1xuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyY1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHNjcmlwdFVybCA9IHNjcmlwdHNbc2NyaXB0cy5sZW5ndGggLSAxXS5zcmNcblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gZG9jdW1lbnQuYmFzZVVSSSB8fCBzZWxmLmxvY2F0aW9uLmhyZWY7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0MTc5OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBvbiBjaHVua3MgbG9hZGVkXG5cbi8vIG5vIGpzb25wIGZ1bmN0aW9uIiwiaW1wb3J0IFwiLi4vaW5kZXguaHRtbFwiO1xuaW1wb3J0IFwiLi9jb21wb25lbnQvY2xpY2tIYW5kbGVyXCI7XG4iXSwibmFtZXMiOlsibW9kdWxlIiwiZXhwb3J0cyIsIl9fX0hUTUxfTE9BREVSX0lNUE9SVF8wX19fIiwiVVJMIiwidXJsIiwib3B0aW9ucyIsIlN0cmluZyIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiaGFzaCIsIm1heWJlTmVlZFF1b3RlcyIsInRlc3QiLCJjb25jYXQiLCJzZWFyY2giLCJjb25zdHJ1Y3RvciIsIl9nZXRWYWx1ZSIsImVsZW1lbnQiLCJ2YWx1ZSIsImdldFNlYXJjaFJlc3VsdHMiLCJ0aGlzIiwic2VhcmNoTGV0dGVycyIsInNwbGl0IiwiZ2V0U2VsZWN0ZWRDb3VudHJpZXMiLCJmaWx0ZXIiLCJjb3VudHJ5IiwiY2hlY2siLCJuYW1lIiwiZm9yRWFjaCIsImxldHRlciIsImluZGV4IiwiZmluZEluZGV4IiwiZWwiLCJzcGxpY2UiLCJtYXAiLCJfYWRkT3B0aW9uIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiY2xlYXJPcHRpb25zIiwiaW5uZXJIVE1MIiwiX3VwZGF0ZURvbSIsImRlbGF5IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJlcnJvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhhbmRsZXIiLCJldmVudCIsInRhcmdldCIsIkhUTUxFbGVtZW50IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ0ZXh0Q29udGVudCIsImdldENvdW50cnkiLCJhZGRBcnJheUNvdW50cmllcyIsImNsb3Nlc3QiLCJjaGFuZ2VUaGVtZSIsInBvcHVsYXRpb24iLCJyZWdpb24iLCJjYXBpdGFsIiwiaW1nIiwicmVxdWVzdCIsIl9yZXF1ZXN0QnlOYW1lIiwibmFtZUNvdW50cnkiLCJhbnN3ZXIiLCJmZXRjaCIsImpzb24iLCJfcmVxdWVzdEJ5UmVnaW9uIiwiX3JlcXVlc3RBbGwiLCJfZ2V0Q291bnRyeU9iakZyb21BbnN3ZXIiLCJvZmZpY2lhbCIsImZsYWdzIiwic3ZnIiwiX2dldENvdW50cmllc0Zyb21SZXF1ZXN0IiwiZGF0YSIsImNvdW50cnlPYmoiLCJnZXRDb3VudGllc0Zyb21SZWdpb25zUmVxdWVzdCIsImVsZW0iLCJnZXRBbGxDb3VudHJpZXMiLCJyZW5kZXJGbiIsImNsZWFyTGlzdCIsImxpc3QiLCJhZGRDb3VudHJ5IiwiYXJyIiwiYWN0aXZhdGUiLCJzdHlsZSIsImRpc3BsYXkiLCJkZWFjdGl2YXRlIiwic2VsZWN0IiwiX3NlbGVjdExpc3RlbmVyIiwiX3NlbGVjdENob2ljZSIsInNwaW5uZXIiLCJyZW1vdmUiLCJhZGQiLCJidG5Nb2RlIiwiX3JlbmRlckRhcmsiLCJzdW4iLCJfcmVuZGVyTGlnaHQiLCJtb29uIiwiX3JlbmRlckJ0biIsIl9jdXN0b21lclRoZW1lIiwiX2luaXRpYWxpemUiLCJkb2N1bWVudEVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJ0YXJnZXRUaGVtZSIsIndpbmRvdyIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImNhbGwiLCJtIiwibiIsImdldHRlciIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJnIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwiZSIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInNjcmlwdFVybCIsImltcG9ydFNjcmlwdHMiLCJsb2NhdGlvbiIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiYiIsImJhc2VVUkkiLCJzZWxmIiwiaHJlZiJdLCJzb3VyY2VSb290IjoiIn0=