(()=>{var e={619:(e,t,i)=>{e.exports=i.p+"imgs/moon-waning-crescent.c3556d440980c942661792fe126a221b.svg"},776:(e,t,i)=>{e.exports=i.p+"imgs/white-balance-sunny.192e78bb875e4f1909eae6d408e72fae.svg"},766:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});var n=i(91),s=i.n(n),o=new URL(i(376),i.b);const r='<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width/ninitial-scale=1"> <title>Country</title> <link rel="stylesheet" href="'+s()(o)+'"> </head> <body> <header class="header"> <h1 class="header__title">Where in the world?</h1> <div class="header__btn-mode-block"></div> </header> <main class="countries__container"> <form action="" class="countries__search-form"> <section class="country__search search"> <input class="search__input" type="search" placeholder="Search city" name="city" id="searchLocation"> <ul class="search__options"></ul> </section> <select class="search__select-region" name="regions" id="sel1"> <option value="Initial">--Please choose a region--</option> <option value="All">All</option> <option value="Africa">Africa</option> <option value="Americas">Americas</option> <option value="Asia">Asia</option> <option value="Europe">Europe</option> <option value="Oceania">Oceania</option> </select> </form> <div class="countries__list-wrapper"> <ul class="countries__list"> </ul> <div class="spinner-wrapper spinner-deactivated"> <div class="spinner"></div> </div> </div> </main> </body> </html> '},91:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),t.hash&&(e+=t.hash),t.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},111:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(269)),r=s(i(955)),a=new class{constructor(){this._getValue=()=>{if("All"===r.default.element.value||"Initial"===r.default.element.value)return o.default.getSearchResults(this.element.value);{const e=this.element.value.split("");return r.default.getSelectedCountries.filter((t=>{let i=!0;const n=t.name.split("");return e.forEach((e=>{const t=n.findIndex((t=>t===e));-1!==t?n.splice(t,1):i=!1})),i})).map((e=>e.name))}},this._addOption=e=>{this.options.insertAdjacentHTML("beforeend",`\n    <div class="search__option">${e}</div>\n  `)},this.clearOptions=()=>this.options.innerHTML="",this._updateDom=()=>n(this,void 0,void 0,(function*(){let e;this.element.addEventListener("keyup",(()=>{e&&clearTimeout(e),e=setTimeout((()=>n(this,void 0,void 0,(function*(){this.clearOptions();try{(yield this._getValue()).forEach((e=>this._addOption(e)))}catch(e){this.clearOptions(),this._addOption("Country not found")}""===this.element.value&&this.clearOptions()}))),500)}))})),this.element=document.querySelector(".search__input"),this.options=document.querySelector(".search__options"),this._updateDom()}};t.default=a},791:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(727)),r=s(i(269)),a=s(i(111)),c=s(i(534));(new class{constructor(){this.handler=()=>{document.addEventListener("click",(e=>n(this,void 0,void 0,(function*(){const t=e.target;if(t instanceof HTMLElement){if(t.classList.contains("search__option")){if(!t.textContent||"Country not found"===t.textContent)return;const e=yield r.default.getCountry(t.textContent);o.default.addArrayCountries([e]),a.default.clearOptions(),a.default.element.value=e.name}t.closest(".header__btn-mode-block")&&c.default.changeTheme()}}))))}}}).handler()},937:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,i,n,s){this.name=e,this.population=t,this.region=i,this.capital=n,this.img=s,this.getCountry=()=>this}}},269:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(937)),r=new class{constructor(){this._requestByName=e=>n(this,void 0,void 0,(function*(){const t=yield fetch(`https://restcountries.com/v3.1/name/${e}`);return yield t.json()})),this._requestByRegion=e=>n(this,void 0,void 0,(function*(){const t=yield fetch(`https://restcountries.com/v3.1/region/${e}`);return yield t.json()})),this._requestAll=()=>n(this,void 0,void 0,(function*(){const e=yield fetch("https://restcountries.com/v3.1/all");return yield e.json()})),this._getCountryObjFromAnswer=e=>{const{capital:t,name:{official:i},population:n,region:s,flags:{svg:r}}=e;return new o.default(i,n,s,t,r)},this._getCountriesFromRequest=e=>e.map((e=>this._getCountryObjFromAnswer(e))),this.getCountry=e=>n(this,void 0,void 0,(function*(){const t=yield this._requestByName(e);return this._getCountriesFromRequest(t)[0]})),this.getCountiesFromRegionsRequest=e=>n(this,void 0,void 0,(function*(){const t=yield this._requestByRegion(e);return this._getCountriesFromRequest(t)})),this.getSearchResults=e=>n(this,void 0,void 0,(function*(){return(yield this._requestByName(e)).map((e=>e.name.official))})),this.getAllCountries=()=>n(this,void 0,void 0,(function*(){const e=yield this._requestAll();return this._getCountriesFromRequest(e)}))}};t.default=r},727:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(i(152)),o=new class{constructor(){this.clearList=()=>{this.list.innerHTML=""},this.addCountry=({name:e,population:t,region:i,capital:n,img:s})=>{this.list.insertAdjacentHTML("beforeend",`\n    <li class="countries__country-item country">\n        <img src="${s}" alt="" class="country__flag">\n        <div class="country__description">\n            <h3 class="country__title">${e}</h3>\n            <p class="country__info"><b>Population: </b>${t}</p>\n            <p class="country__info"><b>Region:</b> ${i}</p>\n            <p class="country__info"><b>Capital:</b> ${n}</p>\n        </div>\n    </li>`)},this.addArrayCountries=e=>{s.default.activate(),this.clearList(),this.list.style.display="none",e.forEach((e=>this.addCountry(e))),setTimeout((()=>{s.default.deactivate()}),500),this.list.style.display="grid"},this.list=document.querySelector(".countries__list")}};t.default=o},955:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}c((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(i(269)),r=s(i(727)),a=new class{constructor(){this._selectListener=()=>{this.element.addEventListener("change",(()=>n(this,void 0,void 0,(function*(){this._selectChoice=this.element.value,"All"===this._selectChoice?this.getSelectedCountries=yield o.default.getAllCountries():this.getSelectedCountries=yield o.default.getCountiesFromRegionsRequest(this._selectChoice),r.default.addArrayCountries(this.getSelectedCountries)}))))},this.element=document.querySelector(".search__select-region"),this._selectChoice=null,this.getSelectedCountries=[],this._selectListener()}};t.default=a},152:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=new class{constructor(){this.activate=()=>{this.element.classList.remove("spinner-deactivated"),this.element.classList.add("spinner-active")},this.deactivate=()=>{this.element.classList.remove("spinner-active"),this.element.classList.add("spinner-deactivated")},this.element=document.querySelector(".spinner-wrapper")}};t.default=i},534:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=new class{constructor(){this._renderDark=()=>{this.element.innerHTML=`<img class="header__btn-img" src="${this.img.sun}" alt="">\n      <button class="header__btn-mode">Light Mode</button>`},this._renderLight=()=>{this.element.innerHTML=`<img class="header__btn-img" src="${this.img.moon}" alt="">\n      <button class="header__btn-mode">Dark Mode</button>`},this._renderBtn=()=>{"dark"===this._customerTheme?this._renderDark():this._renderLight()},this._initialize=()=>{document.documentElement.setAttribute("data-theme",this._customerTheme),this._renderBtn()},this.changeTheme=()=>{let e;e="light"===this._customerTheme?"dark":"light",document.documentElement.setAttribute("data-theme",e),this._customerTheme=e,n._renderBtn()},this.element=document.querySelector(".header__btn-mode-block"),this.img={sun:i(776),moon:i(619)},this._customerTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",this._initialize()}};t.default=n},376:(e,t,i)=>{"use strict";e.exports=i.p+"css/style.css"}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,i),o.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),i.b=document.baseURI||self.location.href,(()=>{"use strict";i(766),i(791)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ZTNILEVBQVMsYUFBYyxDQUFFZ0IsT0FBTyxHQUFPLEUsTUNMOUQsSUFBSXlILEVBQ0E3QixFQUFvQmtCLEVBQUVZLGdCQUFlRCxFQUFZN0IsRUFBb0JrQixFQUFFYSxTQUFXLElBQ3RGLElBQUloRyxFQUFXaUUsRUFBb0JrQixFQUFFbkYsU0FDckMsSUFBSzhGLEdBQWE5RixJQUNiQSxFQUFTaUcsZ0JBQ1pILEVBQVk5RixFQUFTaUcsY0FBY0MsTUFDL0JKLEdBQVcsQ0FDZixJQUFJSyxFQUFVbkcsRUFBU29HLHFCQUFxQixVQUN6Q0QsRUFBUUUsU0FBUVAsRUFBWUssRUFBUUEsRUFBUUUsT0FBUyxHQUFHSCxJQUM1RCxDQUlELElBQUtKLEVBQVcsTUFBTSxJQUFJUSxNQUFNLHlEQUNoQ1IsRUFBWUEsRUFBVVMsUUFBUSxPQUFRLElBQUlBLFFBQVEsUUFBUyxJQUFJQSxRQUFRLFlBQWEsS0FDcEZ0QyxFQUFvQnVDLEVBQUlWLEMsS0NmeEI3QixFQUFvQndDLEVBQUl6RyxTQUFTMEcsU0FBV0MsS0FBS1gsU0FBU1ksSyxtQkNDMUQsT0FHQSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanMvLi9zcmMvYXNzZXRzL2ltZy9tb29uLXdhbmluZy1jcmVzY2VudC5zdmciLCJ3ZWJwYWNrOi8vanMvLi9zcmMvYXNzZXRzL2ltZy93aGl0ZS1iYWxhbmNlLXN1bm55LnN2ZyIsIndlYnBhY2s6Ly9qcy8uL3NyYy9pbmRleC5odG1sIiwid2VicGFjazovL2pzLy4vbm9kZV9tb2R1bGVzL2h0bWwtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanMiLCJ3ZWJwYWNrOi8vanMvLi9zcmMvdHMvY29tcG9uZW50L2FwcC50cyIsIndlYnBhY2s6Ly9qcy8uL3NyYy90cy9jb21wb25lbnQvY2xpY2tIYW5kbGVyLnRzIiwid2VicGFjazovL2pzLy4vc3JjL3RzL2NvbXBvbmVudC9jb3VudHJ5LnRzIiwid2VicGFjazovL2pzLy4vc3JjL3RzL2NvbXBvbmVudC9nZXREYXRhLnRzIiwid2VicGFjazovL2pzLy4vc3JjL3RzL2NvbXBvbmVudC9yZW5kZXJMaXN0LnRzIiwid2VicGFjazovL2pzLy4vc3JjL3RzL2NvbXBvbmVudC9zZWxlY3QudHMiLCJ3ZWJwYWNrOi8vanMvLi9zcmMvdHMvY29tcG9uZW50L3NwaW5uZXIudHMiLCJ3ZWJwYWNrOi8vanMvLi9zcmMvdHMvY29tcG9uZW50L3RoZW1lLnRzIiwid2VicGFjazovL2pzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2pzL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2pzL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9qcy93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2pzL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vanMvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9qcy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9qcy93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9qcy8uL3NyYy90cy9pbmRleC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19wdWJsaWNfcGF0aF9fICsgXCJpbWdzL21vb24td2FuaW5nLWNyZXNjZW50LmMzNTU2ZDQ0MDk4MGM5NDI2NjE3OTJmZTEyNmEyMjFiLnN2Z1wiOyIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImltZ3Mvd2hpdGUtYmFsYW5jZS1zdW5ueS4xOTJlNzhiYjg3NWU0ZjE5MDllYWU2ZDQwOGU3MmZhZS5zdmdcIjsiLCIvLyBJbXBvcnRzXG5pbXBvcnQgX19fSFRNTF9MT0FERVJfR0VUX1NPVVJDRV9GUk9NX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2h0bWwtbG9hZGVyL2Rpc3QvcnVudGltZS9nZXRVcmwuanNcIjtcbnZhciBfX19IVE1MX0xPQURFUl9JTVBPUlRfMF9fXyA9IG5ldyBVUkwoXCIuL3Nhc3Mvc3R5bGUuc2Fzc1wiLCBpbXBvcnQubWV0YS51cmwpO1xuLy8gTW9kdWxlXG52YXIgX19fSFRNTF9MT0FERVJfUkVQTEFDRU1FTlRfMF9fXyA9IF9fX0hUTUxfTE9BREVSX0dFVF9TT1VSQ0VfRlJPTV9JTVBPUlRfX18oX19fSFRNTF9MT0FERVJfSU1QT1JUXzBfX18pO1xudmFyIGNvZGUgPSBcIjwhRE9DVFlQRSBodG1sPiA8aHRtbCBsYW5nPVxcXCJlblxcXCI+IDxoZWFkPiA8bWV0YSBjaGFyc2V0PVxcXCJVVEYtOFxcXCI+IDxtZXRhIGh0dHAtZXF1aXY9XFxcIlgtVUEtQ29tcGF0aWJsZVxcXCIgY29udGVudD1cXFwiSUU9ZWRnZVxcXCI+IDxtZXRhIG5hbWU9XFxcInZpZXdwb3J0XFxcIiBjb250ZW50PVxcXCJ3aWR0aD1kZXZpY2Utd2lkdGgvbmluaXRpYWwtc2NhbGU9MVxcXCI+IDx0aXRsZT5Db3VudHJ5PC90aXRsZT4gPGxpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCJcIiArIF9fX0hUTUxfTE9BREVSX1JFUExBQ0VNRU5UXzBfX18gKyBcIlxcXCI+IDwvaGVhZD4gPGJvZHk+IDxoZWFkZXIgY2xhc3M9XFxcImhlYWRlclxcXCI+IDxoMSBjbGFzcz1cXFwiaGVhZGVyX190aXRsZVxcXCI+V2hlcmUgaW4gdGhlIHdvcmxkPzwvaDE+IDxkaXYgY2xhc3M9XFxcImhlYWRlcl9fYnRuLW1vZGUtYmxvY2tcXFwiPjwvZGl2PiA8L2hlYWRlcj4gPG1haW4gY2xhc3M9XFxcImNvdW50cmllc19fY29udGFpbmVyXFxcIj4gPGZvcm0gYWN0aW9uPVxcXCJcXFwiIGNsYXNzPVxcXCJjb3VudHJpZXNfX3NlYXJjaC1mb3JtXFxcIj4gPHNlY3Rpb24gY2xhc3M9XFxcImNvdW50cnlfX3NlYXJjaCBzZWFyY2hcXFwiPiA8aW5wdXQgY2xhc3M9XFxcInNlYXJjaF9faW5wdXRcXFwiIHR5cGU9XFxcInNlYXJjaFxcXCIgcGxhY2Vob2xkZXI9XFxcIlNlYXJjaCBjaXR5XFxcIiBuYW1lPVxcXCJjaXR5XFxcIiBpZD1cXFwic2VhcmNoTG9jYXRpb25cXFwiPiA8dWwgY2xhc3M9XFxcInNlYXJjaF9fb3B0aW9uc1xcXCI+PC91bD4gPC9zZWN0aW9uPiA8c2VsZWN0IGNsYXNzPVxcXCJzZWFyY2hfX3NlbGVjdC1yZWdpb25cXFwiIG5hbWU9XFxcInJlZ2lvbnNcXFwiIGlkPVxcXCJzZWwxXFxcIj4gPG9wdGlvbiB2YWx1ZT1cXFwiSW5pdGlhbFxcXCI+LS1QbGVhc2UgY2hvb3NlIGEgcmVnaW9uLS08L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT1cXFwiQWxsXFxcIj5BbGw8L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT1cXFwiQWZyaWNhXFxcIj5BZnJpY2E8L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT1cXFwiQW1lcmljYXNcXFwiPkFtZXJpY2FzPC9vcHRpb24+IDxvcHRpb24gdmFsdWU9XFxcIkFzaWFcXFwiPkFzaWE8L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT1cXFwiRXVyb3BlXFxcIj5FdXJvcGU8L29wdGlvbj4gPG9wdGlvbiB2YWx1ZT1cXFwiT2NlYW5pYVxcXCI+T2NlYW5pYTwvb3B0aW9uPiA8L3NlbGVjdD4gPC9mb3JtPiA8ZGl2IGNsYXNzPVxcXCJjb3VudHJpZXNfX2xpc3Qtd3JhcHBlclxcXCI+IDx1bCBjbGFzcz1cXFwiY291bnRyaWVzX19saXN0XFxcIj4gPC91bD4gPGRpdiBjbGFzcz1cXFwic3Bpbm5lci13cmFwcGVyIHNwaW5uZXItZGVhY3RpdmF0ZWRcXFwiPiA8ZGl2IGNsYXNzPVxcXCJzcGlubmVyXFxcIj48L2Rpdj4gPC9kaXY+IDwvZGl2PiA8L21haW4+IDwvYm9keT4gPC9odG1sPiBcIjtcbi8vIEV4cG9ydHNcbmV4cG9ydCBkZWZhdWx0IGNvZGU7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICBvcHRpb25zID0ge307XG4gIH1cblxuICBpZiAoIXVybCkge1xuICAgIHJldHVybiB1cmw7XG4gIH0gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVyc2NvcmUtZGFuZ2xlLCBuby1wYXJhbS1yZWFzc2lnblxuXG5cbiAgdXJsID0gU3RyaW5nKHVybC5fX2VzTW9kdWxlID8gdXJsLmRlZmF1bHQgOiB1cmwpO1xuXG4gIGlmIChvcHRpb25zLmhhc2gpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICB1cmwgKz0gb3B0aW9ucy5oYXNoO1xuICB9XG5cbiAgaWYgKG9wdGlvbnMubWF5YmVOZWVkUXVvdGVzICYmIC9bXFx0XFxuXFxmXFxyIFwiJz08PmBdLy50ZXN0KHVybCkpIHtcbiAgICByZXR1cm4gXCJcXFwiXCIuY29uY2F0KHVybCwgXCJcXFwiXCIpO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07IiwiaW1wb3J0IHJlcXVlc3QgZnJvbSBcIi4vZ2V0RGF0YVwiXG5pbXBvcnQgc2VsZWN0IGZyb20gXCIuL3NlbGVjdFwiXG5cbmNsYXNzIFNlYXJjaCB7XG4gIGVsZW1lbnQ6SFRNTElucHV0RWxlbWVudFxuICBvcHRpb25zOkhUTUxVTGlzdEVsZW1lbnRcbiAgXG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNlYXJjaF9faW5wdXQnKSFcbiAgICB0aGlzLm9wdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoX19vcHRpb25zJykhXG4gICAgdGhpcy5fdXBkYXRlRG9tKClcbiAgfVxuXG4gIHByaXZhdGUgX2dldFZhbHVlID0gKCk9PntcbiAgICBpZiAoc2VsZWN0LmVsZW1lbnQudmFsdWU9PT0nQWxsJ3x8c2VsZWN0LmVsZW1lbnQudmFsdWU9PT0nSW5pdGlhbCcpIHtcbiAgICAgIHJldHVybiByZXF1ZXN0LmdldFNlYXJjaFJlc3VsdHModGhpcy5lbGVtZW50LnZhbHVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzZWFyY2hMZXR0ZXJzID0gdGhpcy5lbGVtZW50LnZhbHVlLnNwbGl0KCcnKVxuICAgICAgY29uc3QgY291bnRyaWVzID0gc2VsZWN0LmdldFNlbGVjdGVkQ291bnRyaWVzLmZpbHRlcihjb3VudHJ5PT57XG4gICAgICAgIGxldCBjaGVjayA9IHRydWVcbiAgICAgICAgY29uc3QgbmFtZSA9IGNvdW50cnkubmFtZS5zcGxpdCgnJylcbiAgICAgICAgc2VhcmNoTGV0dGVycy5mb3JFYWNoKGxldHRlcj0+e1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gbmFtZS5maW5kSW5kZXgoZWw9PmVsPT09bGV0dGVyKVxuICAgICAgICAgIGlmIChpbmRleCE9PS0xKSB7bmFtZS5zcGxpY2UoaW5kZXgsMSl9IGVsc2Uge2NoZWNrPWZhbHNlfVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gY2hlY2tcbiAgICAgIH0pXG4gICAgICByZXR1cm4gY291bnRyaWVzLm1hcChjb3VudHJ5PT5jb3VudHJ5Lm5hbWUpXG4gICAgfVxuICB9IFxuXG4gIHByaXZhdGUgX2FkZE9wdGlvbiA9ICh2YWx1ZTpzdHJpbmcpPT57XG4gICAgdGhpcy5vcHRpb25zLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgXG4gICAgPGRpdiBjbGFzcz1cInNlYXJjaF9fb3B0aW9uXCI+JHt2YWx1ZX08L2Rpdj5cbiAgYClcbiAgfVxuXG4gIGNsZWFyT3B0aW9ucyA9ICgpPT50aGlzLm9wdGlvbnMuaW5uZXJIVE1MPScnXG5cbiAgcHJpdmF0ZSBfdXBkYXRlRG9tID0gYXN5bmMgKCk9PntcbiAgICBsZXQgZGVsYXk6IE5vZGVKUy5UaW1lb3V0XG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKCk9PntcblxuICAgICAgaWYgKGRlbGF5KSB7Y2xlYXJUaW1lb3V0KGRlbGF5KX1cbiAgICAgIGRlbGF5ID0gc2V0VGltZW91dChhc3luYyAoKT0+e1xuICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpXG4gICAgICAgIHRyeSB7ICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHNlYXJjaFZhbHVlcyA9IGF3YWl0IHRoaXMuX2dldFZhbHVlKClcbiAgICAgICAgICBzZWFyY2hWYWx1ZXMuZm9yRWFjaChlbD0+dGhpcy5fYWRkT3B0aW9uKGVsKSlcbiAgICAgICAgICB9XG4gICAgICAgIGNhdGNoKGVycm9yKXtcbiAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpXG4gICAgICAgICAgdGhpcy5fYWRkT3B0aW9uKCdDb3VudHJ5IG5vdCBmb3VuZCcpXG4gICAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5lbGVtZW50LnZhbHVlPT09JycpIHsgdGhpcy5jbGVhck9wdGlvbnMoKX1cbiAgICAgICAgfVxuICAgICAgICAgICw1MDApXG4gICAgICB9KVxuICB9XG59XG5cbmNvbnN0IHNlYXJjaCA9IG5ldyBTZWFyY2goKVxuXG5leHBvcnQgZGVmYXVsdCAgc2VhcmNoIiwiaW1wb3J0IHJlbmRlckZuIGZyb20gXCIuL3JlbmRlckxpc3RcIlxuaW1wb3J0IHJlcXVlc3QgZnJvbSBcIi4vZ2V0RGF0YVwiXG5pbXBvcnQgc2VhcmNoIGZyb20gXCIuL2FwcFwiXG5pbXBvcnQgYnRuTW9kZSAgZnJvbSBcIi4vdGhlbWVcIjtcblxuY2xhc3MgQ2xpY2tIYW5kbGVyIHtcbiAgaGFuZGxlcjogKCkgPT4gdm9pZFxuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMuaGFuZGxlciA9ICgpPT57XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChldmVudCk9PntcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gIGV2ZW50LnRhcmdldFxuICAgICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpIHtyZXR1cm59XG5cbiAgICAgICAgLy8gZmluZCBzcGVjaWFsIGNvdW50cnkgZnJvbSBzZWFyY2ggbGlzdFxuICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2VhcmNoX19vcHRpb24nKSkgeyBcbiAgICAgICAgICBpZiAoIXRhcmdldC50ZXh0Q29udGVudCB8fCB0YXJnZXQudGV4dENvbnRlbnQ9PT0nQ291bnRyeSBub3QgZm91bmQnKSB7cmV0dXJufVxuICAgICAgICAgIGNvbnN0IGNvdW50cnkgPSBhd2FpdCByZXF1ZXN0LmdldENvdW50cnkodGFyZ2V0LnRleHRDb250ZW50KVxuICAgICAgICAgIHJlbmRlckZuLmFkZEFycmF5Q291bnRyaWVzKFtjb3VudHJ5XSlcbiAgICAgICAgICBzZWFyY2guY2xlYXJPcHRpb25zKClcbiAgICAgICAgICBzZWFyY2guZWxlbWVudC52YWx1ZT1jb3VudHJ5Lm5hbWVcbiAgICAgICAgfVxuICAgICAgICAvLyBjaGFuZ2UgZG9jIHRoZW1lXG4gICAgICAgIGlmICh0YXJnZXQuY2xvc2VzdCgnLmhlYWRlcl9fYnRuLW1vZGUtYmxvY2snKSkge1xuICAgICAgICAgIGJ0bk1vZGUuY2hhbmdlVGhlbWUoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuXG5uZXcgQ2xpY2tIYW5kbGVyKCkuaGFuZGxlcigpXG4iLCJleHBvcnQgaW50ZXJmYWNlIElDb3VudHJ5QW5zd2VyIHtcbiAgY2FwaXRhbDpzdHJpbmdcbiAgZmxhZ3MgOiB7XG4gICAgc3ZnOnN0cmluZ1xuICB9XG4gIG5hbWU6eyBvZmZpY2lhbDogc3RyaW5nfVxuICBwb3B1bGF0aW9uOm51bWJlclxuICByZWdpb246c3RyaW5nXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvdW50cnkge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgbmFtZTpzdHJpbmcsIHB1YmxpYyBwb3B1bGF0aW9uOm51bWJlcixwdWJsaWMgcmVnaW9uOnN0cmluZyxwdWJsaWMgY2FwaXRhbDpzdHJpbmcscHVibGljIGltZzpzdHJpbmcpe1xuICB9XG4gIGdldENvdW50cnkgPSAoKT0+e1xuICAgIHJldHVybiB0aGlzXG4gIH1cbn1cbiIsIlxuaW1wb3J0IENvdW50cnkgZnJvbSBcIi4vY291bnRyeVwiXG5pbXBvcnQgeyBJQ291bnRyeUFuc3dlciB9IGZyb20gXCIuL2NvdW50cnlcIjtcblxuY2xhc3MgR2V0RGF0YSB7XG4gIGNvbnN0cnVjdG9yKCkge31cblxuICBwcml2YXRlIF9yZXF1ZXN0QnlOYW1lID0gYXN5bmMgKG5hbWVDb3VudHJ5OnN0cmluZykgPT4ge1xuICAgICAgY29uc3QgYW5zd2VyID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vcmVzdGNvdW50cmllcy5jb20vdjMuMS9uYW1lLyR7bmFtZUNvdW50cnl9YClcbiAgICAgIGNvbnN0IGRhdGE6SUNvdW50cnlBbnN3ZXJbXSA9IGF3YWl0IGFuc3dlci5qc29uKClcbiAgICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBwcml2YXRlIF9yZXF1ZXN0QnlSZWdpb24gPWFzeW5jIChyZWdpb246c3RyaW5nKSA9PiB7XG4gICAgY29uc3QgYW5zd2VyID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vcmVzdGNvdW50cmllcy5jb20vdjMuMS9yZWdpb24vJHtyZWdpb259YClcbiAgICBjb25zdCBkYXRhOklDb3VudHJ5QW5zd2VyW10gPSBhd2FpdCBhbnN3ZXIuanNvbigpXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIHByaXZhdGUgX3JlcXVlc3RBbGwgPWFzeW5jICgpID0+IHtcbiAgICBjb25zdCBhbnN3ZXIgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9yZXN0Y291bnRyaWVzLmNvbS92My4xL2FsbGApXG4gICAgY29uc3QgZGF0YTpJQ291bnRyeUFuc3dlcltdID0gYXdhaXQgYW5zd2VyLmpzb24oKVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBwcml2YXRlIF9nZXRDb3VudHJ5T2JqRnJvbUFuc3dlciA9IChhbnN3ZXI6SUNvdW50cnlBbnN3ZXIpPT57XG4gICAgY29uc3Qge2NhcGl0YWwsIG5hbWU6e29mZmljaWFsOm5hbWV9LCBwb3B1bGF0aW9uLHJlZ2lvbixmbGFnczp7c3ZnOmltZ319ID0gYW5zd2VyXG4gICAgcmV0dXJuIG5ldyBDb3VudHJ5KG5hbWUscG9wdWxhdGlvbixyZWdpb24sY2FwaXRhbCxpbWcpXG4gIH1cblxuICBwcml2YXRlIF9nZXRDb3VudHJpZXNGcm9tUmVxdWVzdCA9IChkYXRhOklDb3VudHJ5QW5zd2VyW10pID0+IHtcbiAgICByZXR1cm4gZGF0YS5tYXAoKGNvdW50cnlPYmopPT50aGlzLl9nZXRDb3VudHJ5T2JqRnJvbUFuc3dlcihjb3VudHJ5T2JqKSlcbiAgfVxuICBcbiAgZ2V0Q291bnRyeSA9IGFzeW5jIChuYW1lQ291bnRyeTpzdHJpbmcpID0+IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fcmVxdWVzdEJ5TmFtZShuYW1lQ291bnRyeSlcbiAgICByZXR1cm4gdGhpcy5fZ2V0Q291bnRyaWVzRnJvbVJlcXVlc3QoZGF0YSlbMF1cbiAgfVxuXG4gIGdldENvdW50aWVzRnJvbVJlZ2lvbnNSZXF1ZXN0ID0gYXN5bmMgKHJlZ2lvbjpzdHJpbmcpPT57XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuX3JlcXVlc3RCeVJlZ2lvbihyZWdpb24pXG4gICAgcmV0dXJuIHRoaXMuX2dldENvdW50cmllc0Zyb21SZXF1ZXN0KGRhdGEpXG4gIH1cblxuICBnZXRTZWFyY2hSZXN1bHRzID0gYXN5bmMgKG5hbWVDb3VudHJ5OnN0cmluZykgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLl9yZXF1ZXN0QnlOYW1lKG5hbWVDb3VudHJ5KVxuICAgIGNvbnN0IHNlYXJjaExpc3QgPSBkYXRhLm1hcChlbGVtPT5lbGVtLm5hbWUub2ZmaWNpYWwpXG4gICAgcmV0dXJuIHNlYXJjaExpc3RcbiAgfVxuICBnZXRBbGxDb3VudHJpZXMgPWFzeW5jICgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5fcmVxdWVzdEFsbCgpXG4gICAgcmV0dXJuIHRoaXMuX2dldENvdW50cmllc0Zyb21SZXF1ZXN0KGRhdGEpXG4gIH1cblxufVxuY29uc3QgcmVxdWVzdCA9IG5ldyBHZXREYXRhKClcbmV4cG9ydCBkZWZhdWx0IHJlcXVlc3RcblxuXG5cbiAgXG4gIFxuICAiLCJpbXBvcnQgQ291bnRyeSBmcm9tIFwiLi9jb3VudHJ5XCJcbmltcG9ydCBzcGlubmVyIGZyb20gXCIuL3NwaW5uZXJcIjtcblxuIGNsYXNzIFJlbmRlckxpc3Qge1xuICBsaXN0OkhUTUxFbGVtZW50XG4gIGNvbnN0cnVjdG9yICgpe1xuICAgIHRoaXMubGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb3VudHJpZXNfX2xpc3QnKSFcbiAgfVxuICBjbGVhckxpc3QgPSAoKT0+e1xuICAgIHRoaXMubGlzdC5pbm5lckhUTUwgPSAnJ1xuICB9XG4gIGFkZENvdW50cnkgPSAoe25hbWUsIHBvcHVsYXRpb24scmVnaW9uLGNhcGl0YWwsaW1nfTpDb3VudHJ5KT0+e1xuICAgIHRoaXMubGlzdC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGBcbiAgICA8bGkgY2xhc3M9XCJjb3VudHJpZXNfX2NvdW50cnktaXRlbSBjb3VudHJ5XCI+XG4gICAgICAgIDxpbWcgc3JjPVwiJHtpbWd9XCIgYWx0PVwiXCIgY2xhc3M9XCJjb3VudHJ5X19mbGFnXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb3VudHJ5X19kZXNjcmlwdGlvblwiPlxuICAgICAgICAgICAgPGgzIGNsYXNzPVwiY291bnRyeV9fdGl0bGVcIj4ke25hbWV9PC9oMz5cbiAgICAgICAgICAgIDxwIGNsYXNzPVwiY291bnRyeV9faW5mb1wiPjxiPlBvcHVsYXRpb246IDwvYj4ke3BvcHVsYXRpb259PC9wPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJjb3VudHJ5X19pbmZvXCI+PGI+UmVnaW9uOjwvYj4gJHtyZWdpb259PC9wPlxuICAgICAgICAgICAgPHAgY2xhc3M9XCJjb3VudHJ5X19pbmZvXCI+PGI+Q2FwaXRhbDo8L2I+ICR7Y2FwaXRhbH08L3A+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvbGk+YClcbiAgfVxuICBhZGRBcnJheUNvdW50cmllcyA9IChhcnI6Q291bnRyeVtdKT0+e1xuICAgIHNwaW5uZXIuYWN0aXZhdGUoKVxuICAgIHRoaXMuY2xlYXJMaXN0KClcbiAgICB0aGlzLmxpc3Quc3R5bGUuZGlzcGxheT0nbm9uZSdcbiAgICBhcnIuZm9yRWFjaChlbD0+dGhpcy5hZGRDb3VudHJ5KGVsKSlcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHNwaW5uZXIuZGVhY3RpdmF0ZSgpXG4gICAgfSwgNTAwKTtcbiAgICB0aGlzLmxpc3Quc3R5bGUuZGlzcGxheT0nZ3JpZCdcbiAgICBcbiAgfVxufVxuY29uc3QgcmVuZGVyRm4gPSBuZXcgUmVuZGVyTGlzdCgpXG5leHBvcnQgZGVmYXVsdCByZW5kZXJGbiIsImltcG9ydCBDb3VudHJ5IGZyb20gXCIuL2NvdW50cnlcIlxuaW1wb3J0IHJlcXVlc3QgZnJvbSBcIi4vZ2V0RGF0YVwiXG5pbXBvcnQgcmVuZGVyRm4gZnJvbSBcIi4vcmVuZGVyTGlzdFwiXG5cbmNsYXNzIFNlbGVjdCB7XG4gIGVsZW1lbnQ6SFRNTFNlbGVjdEVsZW1lbnRcbiAgcHJpdmF0ZSBfc2VsZWN0Q2hvaWNlOiBzdHJpbmd8bnVsbFxuICBnZXRTZWxlY3RlZENvdW50cmllczogQ291bnRyeVtdXG5cbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoX19zZWxlY3QtcmVnaW9uJykhXG4gICAgdGhpcy5fc2VsZWN0Q2hvaWNlID0gbnVsbFxuICAgIHRoaXMuZ2V0U2VsZWN0ZWRDb3VudHJpZXM9W11cbiAgICB0aGlzLl9zZWxlY3RMaXN0ZW5lcigpXG4gIH1cbiAgcHJpdmF0ZSBfc2VsZWN0TGlzdGVuZXIgPSAoKT0+e1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKT0+e1xuICAgICAgdGhpcy5fc2VsZWN0Q2hvaWNlID0gdGhpcy5lbGVtZW50LnZhbHVlXG4gICAgICBpZiAodGhpcy5fc2VsZWN0Q2hvaWNlPT09XCJBbGxcIikge1xuICAgICAgICB0aGlzLmdldFNlbGVjdGVkQ291bnRyaWVzID0gYXdhaXQgcmVxdWVzdC5nZXRBbGxDb3VudHJpZXMoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5nZXRTZWxlY3RlZENvdW50cmllcyA9IGF3YWl0IHJlcXVlc3QuZ2V0Q291bnRpZXNGcm9tUmVnaW9uc1JlcXVlc3QodGhpcy5fc2VsZWN0Q2hvaWNlKVxuICAgICAgfVxuICAgICAgcmVuZGVyRm4uYWRkQXJyYXlDb3VudHJpZXModGhpcy5nZXRTZWxlY3RlZENvdW50cmllcylcbiAgICB9KVxuICB9XG59XG5jb25zdCBzZWxlY3QgPSBuZXcgU2VsZWN0KClcbmV4cG9ydCBkZWZhdWx0IHNlbGVjdCIsImNsYXNzIFNwaW5uZXIge1xuICBlbGVtZW50OkhUTUxEaXZFbGVtZW50XG4gIGNvbnN0cnVjdG9yKCl7XG4gICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNwaW5uZXItd3JhcHBlcicpIVxuICB9XG4gIGFjdGl2YXRlID0gKCk9PntcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc3Bpbm5lci1kZWFjdGl2YXRlZCcpXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NwaW5uZXItYWN0aXZlJylcbiAgfVxuICBkZWFjdGl2YXRlID0gKCk9PntcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnc3Bpbm5lci1hY3RpdmUnKVxuICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzcGlubmVyLWRlYWN0aXZhdGVkJylcbiAgfVxufVxuY29uc3Qgc3Bpbm5lciA9IG5ldyBTcGlubmVyKClcbmV4cG9ydCBkZWZhdWx0IHNwaW5uZXIgIiwiXG5jbGFzcyBidG5DaGFuZ2VNb2RlIHtcbiAgZWxlbWVudDpIVE1MQnV0dG9uRWxlbWVudFxuICBpbWc6e1xuICAgIHN1bjpVUkwsXG4gICAgbW9vbjpVUkxcbiAgfVxuICBfY3VzdG9tZXJUaGVtZSA6IHN0cmluZ1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2J0bi1tb2RlLWJsb2NrJykhXG4gICAgdGhpcy5pbWcgPSB7XG4gICAgICBzdW46IHJlcXVpcmUgKCcuLi8uLi9hc3NldHMvaW1nL3doaXRlLWJhbGFuY2Utc3Vubnkuc3ZnJyksXG4gICAgICBtb29uOiByZXF1aXJlICgnLi4vLi4vYXNzZXRzL2ltZy9tb29uLXdhbmluZy1jcmVzY2VudC5zdmcnKVxuICAgIH1cbiAgICB0aGlzLl9jdXN0b21lclRoZW1lID0gd2luZG93Lm1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpLm1hdGNoZXMgPyBcImRhcmtcIiA6IFwibGlnaHRcIlxuICAgIHRoaXMuX2luaXRpYWxpemUoKVxuICB9XG5cbiAgICBwcml2YXRlIF9yZW5kZXJEYXJrID0gKCk9PntcbiAgICAgIHRoaXMuZWxlbWVudC5pbm5lckhUTUw9YDxpbWcgY2xhc3M9XCJoZWFkZXJfX2J0bi1pbWdcIiBzcmM9XCIke3RoaXMuaW1nLnN1bn1cIiBhbHQ9XCJcIj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJoZWFkZXJfX2J0bi1tb2RlXCI+TGlnaHQgTW9kZTwvYnV0dG9uPmBcbiAgICB9XG4gICAgcHJpdmF0ZSBfcmVuZGVyTGlnaHQgPSAoKT0+e1xuICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTD1gPGltZyBjbGFzcz1cImhlYWRlcl9fYnRuLWltZ1wiIHNyYz1cIiR7dGhpcy5pbWcubW9vbn1cIiBhbHQ9XCJcIj5cbiAgICAgIDxidXR0b24gY2xhc3M9XCJoZWFkZXJfX2J0bi1tb2RlXCI+RGFyayBNb2RlPC9idXR0b24+YFxuICAgIH1cbiAgICBwcml2YXRlIF9yZW5kZXJCdG4gPSAoKT0+e1xuICAgICAgdGhpcy5fY3VzdG9tZXJUaGVtZT09PVwiZGFya1wiP3RoaXMuX3JlbmRlckRhcmsoKTp0aGlzLl9yZW5kZXJMaWdodCgpXG4gICAgfVxuICAgIHByaXZhdGUgX2luaXRpYWxpemUgPSAoKT0+e1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS10aGVtZScsIHRoaXMuX2N1c3RvbWVyVGhlbWUgKVxuICAgICAgdGhpcy5fcmVuZGVyQnRuKClcbiAgICB9XG4gICAgY2hhbmdlVGhlbWUgPSAoKT0+e1xuICAgICAgbGV0IHRhcmdldFRoZW1lXG4gICAgICB0aGlzLl9jdXN0b21lclRoZW1lID09PSBcImxpZ2h0XCIgPyB0YXJnZXRUaGVtZSA9IFwiZGFya1wiIDogdGFyZ2V0VGhlbWUgPSBcImxpZ2h0XCJcbiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGhlbWUnLCB0YXJnZXRUaGVtZSlcbiAgICAgIHRoaXMuX2N1c3RvbWVyVGhlbWUgPSB0YXJnZXRUaGVtZVxuICAgICAgYnRuTW9kZS5fcmVuZGVyQnRuKClcbiAgICB9XG59XG5cbmNvbnN0IGJ0bk1vZGUgPSBuZXcgYnRuQ2hhbmdlTW9kZSgpXG5cbmV4cG9ydCBkZWZhdWx0IGJ0bk1vZGVcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4vLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuX193ZWJwYWNrX3JlcXVpcmVfXy5tID0gX193ZWJwYWNrX21vZHVsZXNfXztcblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsIl9fd2VicGFja19yZXF1aXJlX18uYiA9IGRvY3VtZW50LmJhc2VVUkkgfHwgc2VsZi5sb2NhdGlvbi5ocmVmO1xuXG4vLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuLy8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4vLyBbcmVzb2x2ZSwgcmVqZWN0LCBQcm9taXNlXSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbnZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG5cdDE3OTogMFxufTtcblxuLy8gbm8gY2h1bmsgb24gZGVtYW5kIGxvYWRpbmdcblxuLy8gbm8gcHJlZmV0Y2hpbmdcblxuLy8gbm8gcHJlbG9hZGVkXG5cbi8vIG5vIEhNUlxuXG4vLyBubyBITVIgbWFuaWZlc3RcblxuLy8gbm8gb24gY2h1bmtzIGxvYWRlZFxuXG4vLyBubyBqc29ucCBmdW5jdGlvbiIsIlxuaW1wb3J0IFwiLi4vaW5kZXguaHRtbFwiXG5cblxuaW1wb3J0IFwiLi9jb21wb25lbnQvY2xpY2tIYW5kbGVyXCI7XG5cblxuXG5cblxuXG5cbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiX19fSFRNTF9MT0FERVJfSU1QT1JUXzBfX18iLCJVUkwiLCJ1cmwiLCJvcHRpb25zIiwiU3RyaW5nIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJoYXNoIiwibWF5YmVOZWVkUXVvdGVzIiwidGVzdCIsImNvbmNhdCIsInNlYXJjaCIsImNvbnN0cnVjdG9yIiwiX2dldFZhbHVlIiwiZWxlbWVudCIsInZhbHVlIiwiZ2V0U2VhcmNoUmVzdWx0cyIsInRoaXMiLCJzZWFyY2hMZXR0ZXJzIiwic3BsaXQiLCJnZXRTZWxlY3RlZENvdW50cmllcyIsImZpbHRlciIsImNvdW50cnkiLCJjaGVjayIsIm5hbWUiLCJmb3JFYWNoIiwibGV0dGVyIiwiaW5kZXgiLCJmaW5kSW5kZXgiLCJlbCIsInNwbGljZSIsIm1hcCIsIl9hZGRPcHRpb24iLCJpbnNlcnRBZGphY2VudEhUTUwiLCJjbGVhck9wdGlvbnMiLCJpbm5lckhUTUwiLCJfdXBkYXRlRG9tIiwiZGVsYXkiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImVycm9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGFuZGxlciIsImV2ZW50IiwidGFyZ2V0IiwiSFRNTEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInRleHRDb250ZW50IiwiZ2V0Q291bnRyeSIsImFkZEFycmF5Q291bnRyaWVzIiwiY2xvc2VzdCIsImNoYW5nZVRoZW1lIiwicG9wdWxhdGlvbiIsInJlZ2lvbiIsImNhcGl0YWwiLCJpbWciLCJyZXF1ZXN0IiwiX3JlcXVlc3RCeU5hbWUiLCJuYW1lQ291bnRyeSIsImFuc3dlciIsImZldGNoIiwianNvbiIsIl9yZXF1ZXN0QnlSZWdpb24iLCJfcmVxdWVzdEFsbCIsIl9nZXRDb3VudHJ5T2JqRnJvbUFuc3dlciIsIm9mZmljaWFsIiwiZmxhZ3MiLCJzdmciLCJfZ2V0Q291bnRyaWVzRnJvbVJlcXVlc3QiLCJkYXRhIiwiY291bnRyeU9iaiIsImdldENvdW50aWVzRnJvbVJlZ2lvbnNSZXF1ZXN0IiwiZWxlbSIsImdldEFsbENvdW50cmllcyIsInJlbmRlckZuIiwiY2xlYXJMaXN0IiwibGlzdCIsImFkZENvdW50cnkiLCJhcnIiLCJhY3RpdmF0ZSIsInN0eWxlIiwiZGlzcGxheSIsImRlYWN0aXZhdGUiLCJzZWxlY3QiLCJfc2VsZWN0TGlzdGVuZXIiLCJfc2VsZWN0Q2hvaWNlIiwic3Bpbm5lciIsInJlbW92ZSIsImFkZCIsImJ0bk1vZGUiLCJfcmVuZGVyRGFyayIsInN1biIsIl9yZW5kZXJMaWdodCIsIm1vb24iLCJfcmVuZGVyQnRuIiwiX2N1c3RvbWVyVGhlbWUiLCJfaW5pdGlhbGl6ZSIsImRvY3VtZW50RWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInRhcmdldFRoZW1lIiwid2luZG93IiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiY2FsbCIsIm0iLCJuIiwiZ2V0dGVyIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJlIiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlbmd0aCIsIkVycm9yIiwicmVwbGFjZSIsInAiLCJiIiwiYmFzZVVSSSIsInNlbGYiLCJocmVmIl0sInNvdXJjZVJvb3QiOiIifQ==